{% extends "base.html" %}
{% load static %}
{% load jsignature_filters %}

{% block title %}Ny Installationsbeskrivning{% endblock %}

{% block content %}
<div class="container h-100">
    <div class="row h-100">
        <div class="col-12 col-md-6 my-auto mx-auto text-center">
            <h3 class="pt-5 mt-3">
                Ny Installationsbeskrivning
            </h3>
        </div>
    </div>
    <div class="row">
        <div class="col-12 col-md-6 text-left mx-auto mb-5">
            {{ form.media }}
            <form method="POST" id="installation-description-form" action="{% url 'new_installation_description' %}" class="form" enctype="multipart/form-data">
                {% csrf_token %}
                {{ form|crispy }}
                <button type="submit" class="btn btn-info text-uppercase mb-5 mr-2">Spara</button>
                <a href="{% url 'forms' %}" class="btn btn-secondary text-uppercase mb-5">Avbryt</a>
            </form>
        </div>
    </div>
</div>



{% endblock %}

{% block postloadjs %}

<script>
    function filter_doors() {
        var objectSelect = document.getElementById('id_object_name');
        var doorSelect = document.getElementById('id_door_name');
        var objectId = objectSelect.value;
    
        // Remove all previous options from door select
        while (doorSelect.options.length > 0) {
            doorSelect.remove(0);
        }
    
        // Add empty option to door select
        var emptyOption = document.createElement('option');
        emptyOption.text = '---------';
        emptyOption.value = '';
        doorSelect.add(emptyOption);
    
        if (objectId) {
            $.get('/ajax/get_doors/', {object_id: objectId}, function(data) {
            var doors = JSON.parse(data);
            for (var i = 0; i < doors.length; i++) {
                var door = doors[i];
                var option = document.createElement('option');
                option.text = door.fields.door_name;
                option.value = door.pk;
                doorSelect.add(option);
            }
            });
        }
        }
    
        </script>

{% endblock %}